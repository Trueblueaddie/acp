<!--
  Canonical link plugin

  Provides a canonical link for each ACP, for the purposes of Hypothesis.js.
-->

<script type="module">
  const canonicalBaseUrl = "https://input-output-hk.github.io/acp/";

  // start script
  function start() {
      const location = window.location.href;
      const canonicalPath = "proposals" + location.split("proposals").pop();

      const canonicalUrl = canonicalBaseUrl + canonicalPath;

      const link = document.createElement("link");
      link.rel = "canonical";
      link.href = canonicalUrl;

      document.head.append(link);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>
